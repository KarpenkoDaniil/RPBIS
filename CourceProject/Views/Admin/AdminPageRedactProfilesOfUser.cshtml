@model List<CourceProject.Models.User>
@using Microsoft.AspNetCore.Identity
@inject RoleManager<IdentityRole> RoleManager

@{
    Layout = "~/Views/Shared/MasterPage.cshtml";
}

@if (User.IsInRole("SuperUser"))
{
    <form action="AdministrationRoot">
        <button id="skewed_button" name="menu_button_0" onclick="SumbitFuncButton(0)">Вернуться на главную</button>
        <button id="skewed_button" name="menu_button_1" onclick="SumbitFuncButton(1)">Исправить учетные записи пользователей</button>
        <button id="skewed_button" name="menu_button_2" onclick="SumbitFuncButton(2)">Забнить/разбанить пользователя</button>
        <button id="skewed_button" name="menu_button_3" onclick="SumbitFuncButton(3)">Добавить новые роли</button>
        <input id="SecretInput" name="sumbitButton" value="Create" style="display:none;" />
    </form>

    <div>
        <form method="post" id="DivSelectMenu">
        <div id="DivMenuOfTable">
            <label>Индефикатор пользователя</label>
            <input id="0" type="checkbox" onchange="ChoseFilterInput(0)" />
        </div>
        <div id="DivMenuOfTable">
            <label>Имя</label>
            <input id="1" type="checkbox" onchange="ChoseFilterInput(1)" />
        </div>
        <div id="DivMenuOfTable">
            <label>Фамииля</label>
            <input id="2" type="checkbox" onchange="ChoseFilterInput(2)" />
        </div>
        <div id="DivMenuOfTable">
            <label>Логин</label>
            <input id="3" type="checkbox" onchange="ChoseFilterInput(3)" />
        </div>
        <div id="DivMenuOfTable">
            <label>Номер телефона</label>
            <input id="4" type="checkbox" onchange="ChoseFilterInput(4)" />
        </div>
        <div id="DivMenuOfTable">
            <label>Email</label>
            <input id="5" type="checkbox" onchange="ChoseFilterInput(5)" />
        </div>
        <div id="DivMenuOfTable">
            <label>Роли пользователей</label>
            <input id="6" type="checkbox" onchange="ChoseFilterInput(6)" />
        </div>
        </form>

        <label>Редактирование</label>
        <form style="background-color: powderblue;" id="DivInputMenu" method="post" action="AdminPageRead">
            <div style="display: none;" name="0input" id="DivMenuOfTable">
                <label>Индефикатор пользователя</label>
                <input name="Id" type="text"/>
            </div>
            <div style="display: none;" name="1input" id="DivMenuOfTable">
                <label>Имя</label>
                <input type="text" name="FirstName"/>
            </div>
            <div style="display: none;" name="2input" id="DivMenuOfTable">
                <label>Фамииля</label>
                <input type="text" name="LastName"/>
            </div>
            <div style="display: none;" name="3input" id="DivMenuOfTable">
                <label>Логин</label>
                <input type="text" name="Login"/>
            </div>
            <div style="display: none;" name="4input" id="DivMenuOfTable">
                <label>Номер телефона</label>
                <input type="text" name="PhoneNumber"/>
            </div>
            <div style="display: none;" name="5input" id="DivMenuOfTable">
                <label>Email</label>
                <input type="email" name="Email"/>
            </div>
            <div style="display: none;" name="6input" id="DivMenuOfTable">
                @foreach (var role in RoleManager.Roles)
                {
                    <label>@role.Name</label>
                    <input name="SelectRoles" type="checkbox" value="@role.Name">
                }
            </div>

            <button name="TypePage" value="UpdatePage" id="skewed_button" type="submit">Отправить</button>
        </form>

        <form style="background-color: red;" id="DivInputMenu" method="post" action="AdministrationPageRedactUsersProfiles">
            <div style="display: block;" name="0input" id="DivMenuOfTable">
                <select name="Id">
                    @foreach(var user in Model)
                    {
                        <option value="@user.Id">@user.UserName</option>
                    }
                </select>
            </div>
            <div style="display: block;" name="1input" id="DivMenuOfTable">
                <label>Имя</label>
                <input type="text" name="FirstName" required/>
            </div>
            <div style="display: block;" name="2input" id="DivMenuOfTable">
                <label>Фамииля</label>
                <input type="text" name="LastName" required />
            </div>
            <div style="display: block;" name="3input" id="DivMenuOfTable">
                <label>Логин</label>
                <input type="text" name="Login" required />
            </div>
            <div style="display: block;" name="4input" id="DivMenuOfTable">
                <label>Номер телефона</label>
                <input type="text" name="PhoneNumber" required />
            </div>
            <div style="display: block;" name="5input" id="DivMenuOfTable">
                <label>Номер телефона</label>
                <input type="text" name="Email" required />
            </div>
            <div id="DivMenuOfTable">
                 @foreach (var role in RoleManager.Roles)
                 {
                    <label>@role.Name</label>
                    <input name="SelectRoles" type="checkbox" value="@role.Name">
                 }
            </div>

            <button name="TypePage" value="UpdatePage" id="skewed_button" type="submit">Отправить</button>
        </form>
    </div>

    <table class="table">
        <tr>
            <td>ID</td>
            <td>FirstName</td>
            <td>LastName</td>
            <td>Login</td>
            <td>PhoneNumber</td>
            <td>Email</td>
        </tr>
        @foreach (var user in Model)
        {
            <tr>
                <form asp-action="AdministrationPageBanedUsersPost">
                <td name="ID">@user.Id</td>
                <td>@user.FirstName</td>
                <td>@user.LastName</td>
                <td>@user.UserName</td>
                <td>@user.PhoneNumber</td>
                <td>@user.Email</td>
                <input style="display: none;" value="@user.Id" name="ID" />
                </form>
            </tr>
        }
    </table>

    <div>
        @if (ViewBag.TotalPages > 1)
        {
            for (int i = 1; i <= ViewBag.TotalPages; i++)
            {
                <a href="@Url.Action("Index", new { CurentPage = i, PageSize = ViewBag.PageSize })">@i</a>
            }
        }
    </div>
}
else
{
    <div>
        <label>
            Что пошло не так. Нажмите кнопку что бы вернуться на главную страницу.
        </label>
        <form action="AdministrationRoot">
            <button type="submit">Вернуться</button>
        </form>
    </div>
}